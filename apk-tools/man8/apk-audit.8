.\" Generated by scdoc 1.11.1
.\" Complete documentation for this program is not available as a GNU info page
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.nh
.ad l
.\" Begin generated content:
.TH "apk-audit" "8" "2021-08-03"
.P
.SH NAME
.P
apk audit - audit directories for changes
.P
.SH SYNOPSIS
.P
\fBapk audit\fR [<\fIoptions\fR>.\&.\&.\&] \fIdirectories\fR.\&.\&.\&
.P
.SH DESCRIPTION
.P
\fBapk audit\fR audits the system or specified directories for changes compared to
the package database.\&
.P
The audit can be done against configuration files only (--backup) to generate
list of files needed to be stored in the overlay in run-from-tmps configuration.\&
Alternatively, it can audit all installed files (--system) to e.\&g.\& detect
unauthorized modifications of system files.\&
.P
By default, the output format is one file per line, for each modified file.\&
A character is printed indicating the change detected, followed by a space,
then the affected path.\& The changes detected are:
.P
.TS
l lx
l lx
l lx
l lx
l lx
l lx
l lx
l lx.
T{
A
T}	T{
File added
T}
T{
d
T}	T{
Directory added
T}
T{
D
T}	T{
Directory added (with non-listed files/subdirs)
T}
T{
M
T}	T{
File metadata changed (uid, gid, or mode)
T}
T{
m
T}	T{
Directory metadata changed
T}
T{
U
T}	T{
File contents modified
T}
T{
X
T}	T{
File deleted
T}
T{
x
T}	T{
xattrs changed
T}
.TE
.sp 1
.SH OPTIONS
.P
\fB--backup\fR
.RS 4
Audit configuration files only (default).\& The list of files to be
audited is generated from the masks in protected_paths.\&d.\&
.P
.RE
\fB--check-permissions\fR
.RS 4
Check file permissions too.\& Namely, the uid, gid and file mode will
be checked in addition to the file content.\&
.P
.RE
\fB--packages\fR
.RS 4
Print only the packages with changed files.\& Instead of the full output
each modification, the set of packages with at least one modified file
is printed.\&
.P
To repair all packages with modified files, one could use:
.RS 4
apk audit --packages -q | xargs apk fix
.P
.RE
.RE
\fB--system\fR
.RS 4
Audit all system files.\& All files provided by packages are verified
for integrity with the exception of configuration files (listed in
protected_paths.\&d).\& This is useful detecting unauthorized file changes.\&
.P
.RE
\fB-r, --recursive\fR
.RS 4
Descend into directories and audit them as well.\&
