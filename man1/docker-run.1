.TH "DOCKER" "1" " Docker User Manuals" "Docker Community" "JUNE 2014" 
.nh
.ad l


.SH NAME
.PP
docker\-run \- Run a command in a new container


.SH SYNOPSIS
.PP
\fBdocker run\fP
[\fB\-a\fP|\fB\-\-attach\fP[=\fI[]\fP]]
[\fB\-\-add\-host\fP[=\fI[]\fP]]
[\fB\-\-blkio\-weight\fP[=\fI[BLKIO\-WEIGHT]\fP]]
[\fB\-\-blkio\-weight\-device\fP[=\fI[]\fP]]
[\fB\-\-cpu\-shares\fP[=\fI0\fP]]
[\fB\-\-cap\-add\fP[=\fI[]\fP]]
[\fB\-\-cap\-drop\fP[=\fI[]\fP]]
[\fB\-\-cgroup\-parent\fP[=\fICGROUP\-PATH\fP]]
[\fB\-\-cidfile\fP[=\fICIDFILE\fP]]
[\fB\-\-cpu\-count\fP[=\fI0\fP]]
[\fB\-\-cpu\-percent\fP[=\fI0\fP]]
[\fB\-\-cpu\-period\fP[=\fI0\fP]]
[\fB\-\-cpu\-quota\fP[=\fI0\fP]]
[\fB\-\-cpu\-rt\-period\fP[=\fI0\fP]]
[\fB\-\-cpu\-rt\-runtime\fP[=\fI0\fP]]
[\fB\-\-cpus\fP[=\fI0.0\fP]]
[\fB\-\-cpuset\-cpus\fP[=\fICPUSET\-CPUS\fP]]
[\fB\-\-cpuset\-mems\fP[=\fICPUSET\-MEMS\fP]]
[\fB\-d\fP|\fB\-\-detach\fP]
[\fB\-\-detach\-keys\fP[=\fI[]\fP]]
[\fB\-\-device\fP[=\fI[]\fP]]
[\fB\-\-device\-cgroup\-rule\fP[=\fI[]\fP]]
[\fB\-\-device\-read\-bps\fP[=\fI[]\fP]]
[\fB\-\-device\-read\-iops\fP[=\fI[]\fP]]
[\fB\-\-device\-write\-bps\fP[=\fI[]\fP]]
[\fB\-\-device\-write\-iops\fP[=\fI[]\fP]]
[\fB\-\-dns\fP[=\fI[]\fP]]
[\fB\-\-dns\-option\fP[=\fI[]\fP]]
[\fB\-\-dns\-search\fP[=\fI[]\fP]]
[\fB\-\-domainname\fP[=\fIDOMAINNAME\fP]]
[\fB\-e\fP|\fB\-\-env\fP[=\fI[]\fP]]
[\fB\-\-entrypoint\fP[=\fIENTRYPOINT\fP]]
[\fB\-\-env\-file\fP[=\fI[]\fP]]
[\fB\-\-expose\fP[=\fI[]\fP]]
[\fB\-\-group\-add\fP[=\fI[]\fP]]
[\fB\-h\fP|\fB\-\-hostname\fP[=\fIHOSTNAME\fP]]
[\fB\-\-help\fP]
[\fB\-\-init\fP]
[\fB\-i\fP|\fB\-\-interactive\fP]
[\fB\-\-ip\fP[=\fIIPv4\-ADDRESS\fP]]
[\fB\-\-ip6\fP[=\fIIPv6\-ADDRESS\fP]]
[\fB\-\-ipc\fP[=\fIIPC\fP]]
[\fB\-\-isolation\fP[=\fIdefault\fP]]
[\fB\-\-kernel\-memory\fP[=\fIKERNEL\-MEMORY\fP]]
[\fB\-l\fP|\fB\-\-label\fP[=\fI[]\fP]]
[\fB\-\-label\-file\fP[=\fI[]\fP]]
[\fB\-\-link\fP[=\fI[]\fP]]
[\fB\-\-link\-local\-ip\fP[=\fI[]\fP]]
[\fB\-\-log\-driver\fP[=\fI[]\fP]]
[\fB\-\-log\-opt\fP[=\fI[]\fP]]
[\fB\-m\fP|\fB\-\-memory\fP[=\fIMEMORY\fP]]
[\fB\-\-mac\-address\fP[=\fIMAC\-ADDRESS\fP]]
[\fB\-\-memory\-reservation\fP[=\fIMEMORY\-RESERVATION\fP]]
[\fB\-\-memory\-swap\fP[=\fILIMIT\fP]]
[\fB\-\-memory\-swappiness\fP[=\fIMEMORY\-SWAPPINESS\fP]]
[\fB\-\-mount\fP[=\fI[MOUNT]\fP]]
[\fB\-\-name\fP[=\fINAME\fP]]
[\fB\-\-network\-alias\fP[=\fI[]\fP]]
[\fB\-\-network\fP[=\fI"bridge"\fP]]
[\fB\-\-oom\-kill\-disable\fP]
[\fB\-\-oom\-score\-adj\fP[=\fI0\fP]]
[\fB\-P\fP|\fB\-\-publish\-all\fP]
[\fB\-p\fP|\fB\-\-publish\fP[=\fI[]\fP]]
[\fB\-\-pid\fP[=\fI[PID]\fP]]
[\fB\-\-userns\fP[=\fI[]\fP]]
[\fB\-\-pids\-limit\fP[=\fIPIDS\_LIMIT\fP]]
[\fB\-\-privileged\fP]
[\fB\-\-read\-only\fP]
[\fB\-\-restart\fP[=\fIRESTART\fP]]
[\fB\-\-rm\fP]
[\fB\-\-security\-opt\fP[=\fI[]\fP]]
[\fB\-\-storage\-opt\fP[=\fI[]\fP]]
[\fB\-\-stop\-signal\fP[=\fISIGNAL\fP]]
[\fB\-\-stop\-timeout\fP[=\fITIMEOUT\fP]]
[\fB\-\-shm\-size\fP[=\fI[]\fP]]
[\fB\-\-sig\-proxy\fP[=\fItrue\fP]]
[\fB\-\-sysctl\fP[=\fI[]\fP]]
[\fB\-t\fP|\fB\-\-tty\fP]
[\fB\-\-tmpfs\fP[=\fI[CONTAINER\-DIR[:OPTIONS]\fP]]
[\fB\-u\fP|\fB\-\-user\fP[=\fIUSER\fP]]
[\fB\-\-ulimit\fP[=\fI[]\fP]]
[\fB\-\-uts\fP[=\fI[]\fP]]
[\fB\-v\fP|\fB\-\-volume\fP[=\fI[[HOST\-DIR:]CONTAINER\-DIR[:OPTIONS]]\fP]]
[\fB\-\-volume\-driver\fP[=\fIDRIVER\fP]]
[\fB\-\-volumes\-from\fP[=\fI[]\fP]]
[\fB\-w\fP|\fB\-\-workdir\fP[=\fIWORKDIR\fP]]
IMAGE [COMMAND] [ARG...]


.SH DESCRIPTION
.PP
Run a process in a new container. \fBdocker run\fP starts a process with its own
file system, its own networking, and its own isolated process tree. The IMAGE
which starts the process may define defaults related to the process that will be
run in the container, the networking to expose, and more, but \fBdocker run\fP
gives final control to the operator or administrator who starts the container
from the image. For that reason \fBdocker run\fP has more options than any other
Docker command.

.PP
If the IMAGE is not already loaded then \fBdocker run\fP will pull the IMAGE, and
all image dependencies, from the repository in the same way running \fBdocker
pull\fP IMAGE, before it starts the container from that image.


.SH OPTIONS
.PP
\fB\-a\fP, \fB\-\-attach\fP=[]
   Attach to STDIN, STDOUT or STDERR.

.PP
In foreground mode (the default when \fB\-d\fP
is not specified), \fBdocker run\fP can start the process in the container
and attach the console to the process's standard input, output, and standard
error. It can even pretend to be a TTY (this is what most commandline
executables expect) and pass along signals. The \fB\-a\fP option can be set for
each of stdin, stdout, and stderr.

.PP
\fB\-\-add\-host\fP=[]
   Add a custom host\-to\-IP mapping (host:ip)

.PP
Add a line to /etc/hosts. The format is hostname:ip.  The \fB\-\-add\-host\fP
option can be set multiple times.

.PP
\fB\-\-blkio\-weight\fP=\fI0\fP
   Block IO weight (relative weight) accepts a weight value between 10 and 1000.

.PP
\fB\-\-blkio\-weight\-device\fP=[]
   Block IO weight (relative device weight, format: \fB\fCDEVICE\_NAME:WEIGHT\fR).

.PP
\fB\-\-cpu\-shares\fP=\fI0\fP
   CPU shares (relative weight)

.PP
By default, all containers get the same proportion of CPU cycles. This proportion
can be modified by changing the container's CPU share weighting relative
to the weighting of all other running containers.

.PP
To modify the proportion from the default of 1024, use the \fB\-\-cpu\-shares\fP
flag to set the weighting to 2 or higher.

.PP
The proportion will only apply when CPU\-intensive processes are running.
When tasks in one container are idle, other containers can use the
left\-over CPU time. The actual amount of CPU time will vary depending on
the number of containers running on the system.

.PP
For example, consider three containers, one has a cpu\-share of 1024 and
two others have a cpu\-share setting of 512. When processes in all three
containers attempt to use 100% of CPU, the first container would receive
50% of the total CPU time. If you add a fourth container with a cpu\-share
of 1024, the first container only gets 33% of the CPU. The remaining containers
receive 16.5%, 16.5% and 33% of the CPU.

.PP
On a multi\-core system, the shares of CPU time are distributed over all CPU
cores. Even if a container is limited to less than 100% of CPU time, it can
use 100% of each individual CPU core.

.PP
For example, consider a system with more than three cores. If you start one
container \fB{C0}\fP with \fB\-c=512\fP running one process, and another container
\fB{C1}\fP with \fB\-c=1024\fP running two processes, this can result in the following
division of CPU shares:

.PP
.RS

.nf
PID    container    CPU CPU share
100    {C0}     0   100% of CPU0
101    {C1}     1   100% of CPU1
102    {C1}     2   100% of CPU2

.fi
.RE

.PP
\fB\-\-cap\-add\fP=[]
   Add Linux capabilities

.PP
\fB\-\-cap\-drop\fP=[]
   Drop Linux capabilities

.PP
\fB\-\-cgroup\-parent\fP=""
   Path to cgroups under which the cgroup for the container will be created. If the path is not absolute, the path is considered to be relative to the cgroups path of the init process. Cgroups will be created if they do not already exist.

.PP
\fB\-\-cidfile\fP=""
   Write the container ID to the file

.PP
\fB\-\-cpu\-count\fP=\fI0\fP
    Limit the number of CPUs available for execution by the container.

.PP
.RS

.nf
On Windows Server containers, this is approximated as a percentage of total CPU usage.

On Windows Server containers, the processor resource controls are mutually exclusive, the order of precedence is CPUCount first, then CPUShares, and CPUPercent last.

.fi
.RE

.PP
\fB\-\-cpu\-percent\fP=\fI0\fP
    Limit the percentage of CPU available for execution by a container running on a Windows daemon.

.PP
.RS

.nf
On Windows Server containers, the processor resource controls are mutually exclusive, the order of precedence is CPUCount first, then CPUShares, and CPUPercent last.

.fi
.RE

.PP
\fB\-\-cpu\-period\fP=\fI0\fP
   Limit the CPU CFS (Completely Fair Scheduler) period

.PP
Limit the container's CPU usage. This flag tell the kernel to restrict the container's CPU usage to the period you specify.

.PP
\fB\-\-cpuset\-cpus\fP=""
   CPUs in which to allow execution (0\-3, 0,1)

.PP
\fB\-\-cpuset\-mems\fP=""
   Memory nodes (MEMs) in which to allow execution (0\-3, 0,1). Only effective on NUMA systems.

.PP
If you have four memory nodes on your system (0\-3), use \fB\fC\-\-cpuset\-mems=0,1\fR
then processes in your Docker container will only use memory from the first
two memory nodes.

.PP
\fB\-\-cpu\-quota\fP=\fI0\fP
   Limit the CPU CFS (Completely Fair Scheduler) quota

.PP
Limit the container's CPU usage. By default, containers run with the full
CPU resource. This flag tell the kernel to restrict the container's CPU usage
to the quota you specify.

.PP
\fB\-\-cpu\-rt\-period\fP=0
   Limit the CPU real\-time period in microseconds

.PP
Limit the container's Real Time CPU usage. This flag tell the kernel to restrict the container's Real Time CPU usage to the period you specify.

.PP
\fB\-\-cpu\-rt\-runtime\fP=0
   Limit the CPU real\-time runtime in microseconds

.PP
Limit the containers Real Time CPU usage. This flag tells the kernel to limit the amount of time in a given CPU period Real Time tasks may consume. Ex:
   Period of 1,000,000us and Runtime of 950,000us means that this container could consume 95% of available CPU and leave the remaining 5% to normal priority tasks.

.PP
The sum of all runtimes across containers cannot exceed the amount allotted to the parent cgroup.

.PP
\fB\-\-cpus\fP=0.0
   Number of CPUs. The default is \fI0.0\fP which means no limit.

.PP
\fB\-d\fP, \fB\-\-detach\fP=\fItrue\fP|\fIfalse\fP
   Detached mode: run the container in the background and print the new container ID. The default is \fIfalse\fP\&.

.PP
At any time you can run \fBdocker ps\fP in
the other shell to view a list of the running containers. You can reattach to a
detached container with \fBdocker attach\fP\&.

.PP
When attached in the tty mode, you can detach from the container (and leave it
running) using a configurable key sequence. The default sequence is \fB\fCCTRL\-p CTRL\-q\fR\&.
You configure the key sequence using the \fB\-\-detach\-keys\fP option or a configuration file.
See \fBconfig\-json(5)\fP for documentation on using a configuration file.

.PP
\fB\-\-detach\-keys\fP=\fIkey\fP
   Override the key sequence for detaching a container; \fIkey\fP is a single character from the [a\-Z] range, or \fBctrl\fP\-\fIvalue\fP, where \fIvalue\fP is one of: \fBa\-z\fP, \fB@\fP, \fB^\fP, \fB[\fP, \fB,\fP, or \fB\_\fP\&.

.PP
\fB\-\-device\fP=\fIonhost\fP:\fIincontainer\fP[:\fImode\fP]
   Add a host device \fIonhost\fP to the container under the \fIincontainer\fP name.
Optional \fImode\fP parameter can be used to specify device permissions, it is
a combination of \fBr\fP (for read), \fBw\fP (for write), and \fBm\fP (for \fBmknod\fP(2)).

.PP
For example, \fB\-\-device=/dev/sdc:/dev/xvdc:rwm\fP will give a container all
permissions for the host device \fB/dev/sdc\fP, seen as \fB/dev/xvdc\fP inside the container.

.PP
\fB\-\-device\-cgroup\-rule\fP="\fItype\fP \fImajor\fP:\fIminor\fP \fImode\fP"
   Add a rule to the cgroup allowed devices list. The rule is expected to be in the format specified in the Linux kernel documentation (Documentation/cgroup\-v1/devices.txt):
     \- \fItype\fP: \fBa\fP (all), \fBc\fP (char), or \fBb\fP (block);
     \- \fImajor\fP and \fIminor\fP: either a number, or \fB*\fP for all;
     \- \fImode\fP: a composition of \fBr\fP (read), \fBw\fP (write), and \fBm\fP (\fBmknod\fP(2)).

.PP
Example: \fB\-\-device\-cgroup\-rule "c 1:3 mr"\fP: allow for a character device idendified by \fB1:3\fP  to be created and read.

.PP
\fB\-\-device\-read\-bps\fP=[]
   Limit read rate from a device (e.g. \-\-device\-read\-bps=/dev/sda:1mb)

.PP
\fB\-\-device\-read\-iops\fP=[]
   Limit read rate from a device (e.g. \-\-device\-read\-iops=/dev/sda:1000)

.PP
\fB\-\-device\-write\-bps\fP=[]
   Limit write rate to a device (e.g. \-\-device\-write\-bps=/dev/sda:1mb)

.PP
\fB\-\-device\-write\-iops\fP=[]
   Limit write rate to a device (e.g. \-\-device\-write\-iops=/dev/sda:1000)

.PP
\fB\-\-dns\-search\fP=[]
   Set custom DNS search domains (Use \-\-dns\-search=. if you don't wish to set the search domain)

.PP
\fB\-\-dns\-option\fP=[]
   Set custom DNS options

.PP
\fB\-\-dns\fP=[]
   Set custom DNS servers

.PP
This option can be used to override the DNS
configuration passed to the container. Typically this is necessary when the
host DNS configuration is invalid for the container (e.g., 127.0.0.1). When this
is the case the \fB\-\-dns\fP flags is necessary for every run.

.PP
\fB\-\-domainname\fP=""
   Container NIS domain name

.PP
Sets the container's NIS domain name (see also \fBsetdomainname(2)\fP) that is
   available inside the container.

.PP
\fB\-e\fP, \fB\-\-env\fP=[]
   Set environment variables

.PP
This option allows you to specify arbitrary
environment variables that are available for the process that will be launched
inside of the container.

.PP
\fB\-\-entrypoint\fP=""
   Overwrite the default ENTRYPOINT of the image

.PP
This option allows you to overwrite the default entrypoint of the image that
is set in the Dockerfile. The ENTRYPOINT of an image is similar to a COMMAND
because it specifies what executable to run when the container starts, but it is
(purposely) more difficult to override. The ENTRYPOINT gives a container its
default nature or behavior, so that when you set an ENTRYPOINT you can run the
container as if it were that binary, complete with default options, and you can
pass in more options via the COMMAND. But, sometimes an operator may want to run
something else inside the container, so you can override the default ENTRYPOINT
at runtime by using a \fB\-\-entrypoint\fP and a string to specify the new
ENTRYPOINT.

.PP
\fB\-\-env\-file\fP=[]
   Read in a line delimited file of environment variables

.PP
\fB\-\-expose\fP=[]
   Expose a port, or a range of ports (e.g. \-\-expose=3300\-3310) informs Docker
that the container listens on the specified network ports at runtime. Docker
uses this information to interconnect containers using links and to set up port
redirection on the host system.

.PP
\fB\-\-group\-add\fP=[]
   Add additional groups to run as

.PP
\fB\-h\fP, \fB\-\-hostname\fP=""
   Container host name

.PP
Sets the container host name that is available inside the container.

.PP
\fB\-\-help\fP
   Print usage statement

.PP
\fB\-\-init\fP
   Run an init inside the container that forwards signals and reaps processes

.PP
\fB\-i\fP, \fB\-\-interactive\fP=\fItrue\fP|\fIfalse\fP
   Keep STDIN open even if not attached. The default is \fIfalse\fP\&.

.PP
When set to true, keep stdin open even if not attached.

.PP
\fB\-\-ip\fP=""
   Sets the container's interface IPv4 address (e.g., 172.23.0.9)

.PP
It can only be used in conjunction with \fB\-\-network\fP for user\-defined networks

.PP
\fB\-\-ip6\fP=""
   Sets the container's interface IPv6 address (e.g., 2001:db8::1b99)

.PP
It can only be used in conjunction with \fB\-\-network\fP for user\-defined networks

.PP
\fB\-\-ipc\fP=""
   Sets the IPC mode for the container. The following values are accepted:

.TS
allbox;
l l 
l l .
\fB\fCValue\fR	\fB\fCDescription\fR
(empty)	Use daemon's default.
\fBnone\fP	T{
Own private IPC namespace, with /dev/shm not mounted.
T}
\fBprivate\fP	Own private IPC namespace.
\fBshareable\fP	T{
Own private IPC namespace, with a possibility to share it with other containers.
T}
T{
\fBcontainer:\fP\fIname\-or\-ID\fP
T}	T{
Join another ("shareable") container's IPC namespace.
T}
\fBhost\fP	T{
Use the host system's IPC namespace.
T}
.TE

.PP
If not specified, daemon default is used, which can either be \fBprivate\fP
or \fBshareable\fP, depending on the daemon version and configuration.

.PP
\fB\-\-isolation\fP="\fIdefault\fP"
   Isolation specifies the type of isolation technology used by containers. Note
that the default on Windows server is \fB\fCprocess\fR, and the default on Windows client
is \fB\fChyperv\fR\&. Linux only supports \fB\fCdefault\fR\&.

.PP
\fB\-l\fP, \fB\-\-label\fP \fIkey\fP=\fIvalue\fP
   Set metadata on the container (for example, \fB\-\-label com.example.key=value\fP).

.PP
\fB\-\-kernel\-memory\fP=\fInumber\fP[\fIS\fP]
   Kernel memory limit; \fIS\fP is an optional suffix which can be one of \fBb\fP, \fBk\fP, \fBm\fP, or \fBg\fP\&.

.PP
Constrains the kernel memory available to a container. If a limit of 0
is specified (not using \fB\-\-kernel\-memory\fP), the container's kernel memory
is not limited. If you specify a limit, it may be rounded up to a multiple
of the operating system's page size and the value can be very large,
millions of trillions.

.PP
\fB\-\-label\-file\fP=[]
   Read in a line delimited file of labels

.PP
\fB\-\-link\fP=\fIname\-or\-id\fP[:\fIalias\fP]
   Add link to another container.

.PP
If the operator
uses \fB\-\-link\fP when starting the new client container, then the client
container can access the exposed port via a private networking interface. Docker
will set some environment variables in the client container to help indicate
which interface and port to use.

.PP
\fB\-\-link\-local\-ip\fP=[]
   Add one or more link\-local IPv4/IPv6 addresses to the container's interface

.PP
\fB\-\-log\-driver\fP="\fIjson\-file\fP|\fIsyslog\fP|\fIjournald\fP|\fIgelf\fP|\fIfluentd\fP|\fIawslogs\fP|\fIsplunk\fP|\fIetwlogs\fP|\fIgcplogs\fP|\fInone\fP"
  Logging driver for the container. Default is defined by daemon \fB\-\-log\-driver\fP flag.
  \fBWarning\fP: the \fB\fCdocker logs\fR command works only for the \fB\fCjson\-file\fR and
  \fB\fCjournald\fR logging drivers.

.PP
\fB\-\-log\-opt\fP=[]
  Logging driver specific options.

.PP
\fB\-m\fP, \fB\-\-memory\fP=\fInumber\fP[*S]
   Memory limit; \fIS\fP is an optional suffix which can be one of \fBb\fP, \fBk\fP, \fBm\fP, or \fBg\fP\&.

.PP
Allows you to constrain the memory available to a container. If the host
supports swap memory, then the \fB\-m\fP memory setting can be larger than physical
RAM. If a limit of 0 is specified (not using \fB\-m\fP), the container's memory is
not limited. The actual limit may be rounded up to a multiple of the operating
system's page size (the value would be very large, that's millions of trillions).

.PP
\fB\-\-memory\-reservation\fP=\fInumber\fP[*S]
   Memory soft limit; \fIS\fP is an optional suffix which can be one of \fBb\fP, \fBk\fP, \fBm\fP, or \fBg\fP\&.

.PP
After setting memory reservation, when the system detects memory contention
or low memory, containers are forced to restrict their consumption to their
reservation. So you should always set the value below \fB\-\-memory\fP, otherwise the
hard limit will take precedence. By default, memory reservation will be the same
as memory limit.

.PP
\fB\-\-memory\-swap\fP=\fInumber\fP[\fIS\fP]
   Combined memory plus swap limit; \fIS\fP is an optional suffix which can be one of \fBb\fP, \fBk\fP, \fBm\fP, or \fBg\fP\&.

.PP
This option can only be used together with \fB\-\-memory\fP\&. The argument should always be larger than that of \fB\-\-memory\fP\&. Default is double the value of \fB\-\-memory\fP\&. Set to \fB\-1\fP to enable unlimited swap.

.PP
\fB\-\-mac\-address\fP=""
   Container MAC address (e.g., \fB92:d0:c6:0a:29:33\fP)

.PP
Remember that the MAC address in an Ethernet network must be unique.
The IPv6 link\-local address will be based on the device's MAC address
according to RFC4862.

.PP
\fB\-\-mount\fP \fBtype=\fP\fITYPE\fP,\fITYPE\-SPECIFIC\-OPTION\fP[,...]
   Attach a filesystem mount to the container

.PP
Current supported mount \fB\fCTYPES\fR are \fB\fCbind\fR, \fB\fCvolume\fR, and \fB\fCtmpfs\fR\&.

.PP
e.g.

.PP
\fB\fCtype=bind,source=/path/on/host,destination=/path/in/container\fR

.PP
\fB\fCtype=volume,source=my\-volume,destination=/path/in/container,volume\-label="color=red",volume\-label="shape=round"\fR

.PP
\fB\fCtype=tmpfs,tmpfs\-size=512M,destination=/path/in/container\fR

.PP
Common Options:

.RS
.IP \(bu 2
\fB\fCsrc\fR, \fB\fCsource\fR: mount source spec for \fB\fCbind\fR and \fB\fCvolume\fR\&. Mandatory for \fB\fCbind\fR\&.
.IP \(bu 2
\fB\fCdst\fR, \fB\fCdestination\fR, \fB\fCtarget\fR: mount destination spec.
.IP \(bu 2
\fB\fCro\fR, \fB\fCreadonly\fR: \fB\fCtrue\fR or \fB\fCfalse\fR (default).

.RE

.PP
\fBNote\fP: setting \fB\fCreadonly\fR for a bind mount does not make its submounts
   read\-only on the current Linux implementation. See also \fB\fCbind\-nonrecursive\fR\&.

.PP
Options specific to \fB\fCbind\fR:

.RS
.IP \(bu 2
\fB\fCbind\-propagation\fR: \fB\fCshared\fR, \fB\fCslave\fR, \fB\fCprivate\fR, \fB\fCrshared\fR, \fB\fCrslave\fR, or \fB\fCrprivate\fR(default). See also \fB\fCmount(2)\fR\&.
.IP \(bu 2
\fB\fCconsistency\fR: \fB\fCconsistent\fR(default), \fB\fCcached\fR, or \fB\fCdelegated\fR\&. Currently, only effective for Docker for Mac.
.IP \(bu 2
\fB\fCbind\-nonrecursive\fR: \fB\fCtrue\fR or \fB\fCfalse\fR (default). If set to \fB\fCtrue\fR,
submounts are not recursively bind\-mounted. This option is useful for
\fB\fCreadonly\fR bind mount.

.RE

.PP
Options specific to \fB\fCvolume\fR:

.RS
.IP \(bu 2
\fB\fCvolume\-driver\fR: Name of the volume\-driver plugin.
.IP \(bu 2
\fB\fCvolume\-label\fR: Custom metadata.
.IP \(bu 2
\fB\fCvolume\-nocopy\fR: \fB\fCtrue\fR(default) or \fB\fCfalse\fR\&. If set to \fB\fCfalse\fR, the Engine copies existing files and directories under the mount\-path into the volume, allowing the host to access them.
.IP \(bu 2
\fB\fCvolume\-opt\fR: specific to a given volume driver.

.RE

.PP
Options specific to \fB\fCtmpfs\fR:

.RS
.IP \(bu 2
\fB\fCtmpfs\-size\fR: Size of the tmpfs mount in bytes. Unlimited by default in Linux.
.IP \(bu 2
\fB\fCtmpfs\-mode\fR: File mode of the tmpfs in octal. (e.g. \fB\fC700\fR or \fB\fC0700\fR\&.) Defaults to \fB\fC1777\fR in Linux.

.RE

.PP
\fB\-\-name\fP=""
   Assign a name to the container

.PP
The operator can identify a container in three ways:

.TS
allbox;
l l 
l l .
\fB\fCIdentifier type\fR	\fB\fCExample value\fR
UUID long identifier	T{
"f78375b1c487e03c9438c729345e54db9d20cfa2ac1fc3494b6eb60872e74778"
T}
UUID short identifier	"f78375b1c487"
Name	"evil\_ptolemy"
.TE

.PP
The UUID identifiers come from the Docker daemon, and if a name is not assigned
to the container with \fB\-\-name\fP then the daemon will also generate a random
string name. The name is useful when defining links (see \fB\-\-link\fP) (or any
other place you need to identify a container). This works for both background
and foreground Docker containers.

.PP
\fB\-\-network\fP=\fItype\fP
   Set the Network mode for the container. Supported values are:

.TS
allbox;
l l 
l l .
\fB\fCValue\fR	\fB\fCDescription\fR
\fBnone\fP	T{
No networking in the container.
T}
\fBbridge\fP	T{
Connect the container to the default Docker bridge via veth interfaces.
T}
\fBhost\fP	T{
Use the host's network stack inside the container.
T}
\fBcontainer:\fP\fIname\fP	\fIid\fP
\fInetwork\-name\fP	\fInetwork\-id\fP
.TE

.PP
Default is \fBbridge\fP\&.

.PP
\fB\-\-network\-alias\fP=[]
   Add network\-scoped alias for the container

.PP
\fB\-\-oom\-kill\-disable\fP=\fItrue\fP|\fIfalse\fP
   Whether to disable OOM Killer for the container or not.

.PP
\fB\-\-oom\-score\-adj\fP=""
   Tune the host's OOM preferences for containers (accepts \-1000 to 1000)

.PP
\fB\-P\fP, \fB\-\-publish\-all\fP=\fItrue\fP|\fIfalse\fP
   Publish all exposed ports to random ports on the host interfaces. The default is \fIfalse\fP\&.

.PP
When set to true publish all exposed ports to the host interfaces. The
default is false. If the operator uses \-P (or \-p) then Docker will make the
exposed port accessible on the host and the ports will be available to any
client that can reach the host. When using \-P, Docker will bind any exposed
port to a random port on the host within an \fIephemeral port range\fP defined by
\fB\fC/proc/sys/net/ipv4/ip\_local\_port\_range\fR\&. To find the mapping between the host
ports and the exposed ports, use \fB\fCdocker port\fR(1).

.PP
\fB\-p\fP, \fB\-\-publish\fP \fIip\fP:[\fIhostPort\fP]:\fIcontainerPort\fP | [\fIhostPort\fP:]\fIcontainerPort\fP
   Publish a container's port, or range of ports, to the host.

.PP
Both \fIhostPort\fP and \fIcontainerPort\fP can be specified as a range.
When specifying ranges for both, the number of ports in ranges should be equal.

.PP
Examples: \fB\-p 1234\-1236:1222\-1224\fP, \fB\-p 127.0.0.1:$HOSTPORT:$CONTAINERPORT\fP\&.

.PP
Use \fB\fCdocker port\fR(1) to see the actual mapping, e.g. \fB\fCdocker port CONTAINER $CONTAINERPORT\fR\&.

.PP
\fB\-\-pid\fP=""
   Set the PID mode for the container
   Default is to create a private PID namespace for the container
                               'container:<name|id>\&': join another container's PID namespace
                               'host': use the host's PID namespace for the container. Note: the host mode gives the container full access to local PID and is therefore considered insecure.

.PP
\fB\-\-userns\fP=""
   Set the usernamespace mode for the container when \fB\fCuserns\-remap\fR option is enabled.
     \fBhost\fP: use the host usernamespace and enable all privileged options (e.g., \fB\fCpid=host\fR or \fB\fC\-\-privileged\fR).

.PP
\fB\-\-pids\-limit\fP=""
   Tune the container's pids (process IDs) limit. Set to \fB\fC\-1\fR to have unlimited pids for the container.

.PP
\fB\-\-uts\fP=\fItype\fP
   Set the UTS mode for the container. The only possible \fItype\fP is \fBhost\fP, meaning to
use the host's UTS namespace inside the container.
     Note: the host mode gives the container access to changing the host's hostname and is therefore considered insecure.

.PP
\fB\-\-privileged\fP [\fBtrue\fP|\fBfalse\fP]
   Give extended privileges to this container. A "privileged" container is given access to all devices.

.PP
When the operator executes \fBdocker run \-\-privileged\fP, Docker will enable access
to all devices on the host as well as set some configuration in AppArmor to
allow the container nearly all the same access to the host as processes running
outside of a container on the host.

.PP
\fB\-\-read\-only\fP=\fBtrue\fP|\fBfalse\fP
   Mount the container's root filesystem as read only.

.PP
By default a container will have its root filesystem writable allowing processes
to write files anywhere.  By specifying the \fB\fC\-\-read\-only\fR flag the container will have
its root filesystem mounted as read only prohibiting any writes.

.PP
\fB\-\-restart\fP \fIpolicy\fP
   Restart policy to apply when a container exits. Supported values are:

.TS
allbox;
l l 
l l .
\fB\fCPolicy\fR	\fB\fCResult\fR
\fBno\fP	T{
Do not automatically restart the container when it exits.
T}
T{
\fBon\-failure\fP[:\fImax\-retries\fP]
T}	T{
Restart only if the container exits with a non\-zero exit status. Optionally, limit the number of restart retries the Docker daemon attempts.
T}
\fBalways\fP	T{
Always restart the container regardless of the exit status. When you specify always, the Docker daemon will try to restart the container indefinitely. The container will also always start on daemon startup, regardless of the current state of the container.
T}
\fBunless\-stopped\fP	T{
Always restart the container regardless of the exit status, but do not start it on daemon startup if the container has been put to a stopped state before.
T}
.TE

.PP
Default is \fBno\fP\&.

.PP
\fB\-\-rm\fP \fBtrue\fP|\fBfalse\fP
   Automatically remove the container when it exits. The default is \fBfalse\fP\&.
   \fB\fC\-\-rm\fR flag can work together with \fB\fC\-d\fR, and auto\-removal will be done on daemon side. Note that it's
incompatible with any restart policy other than \fB\fCnone\fR\&.

.PP
\fB\-\-security\-opt\fP \fIvalue\fP[,...]
   Security Options for the container. The following options can be given:

.PP
.RS

.nf
"label=user:USER"   : Set the label user for the container
"label=role:ROLE"   : Set the label role for the container
"label=type:TYPE"   : Set the label type for the container
"label=level:LEVEL" : Set the label level for the container
"label=disable"     : Turn off label confinement for the container
"no\-new\-privileges" : Disable container processes from gaining additional privileges

"seccomp=unconfined" : Turn off seccomp confinement for the container
"seccomp=profile.json :  White listed syscalls seccomp Json file to be used as a seccomp filter

"apparmor=unconfined" : Turn off apparmor confinement for the container
"apparmor=your\-profile" : Set the apparmor confinement profile for the container

.fi
.RE

.PP
\fB\-\-storage\-opt\fP
   Storage driver options per container

.PP
$ docker run \-it \-\-storage\-opt size=120G fedora /bin/bash

.PP
This (size) will allow to set the container rootfs size to 120G at creation time.
   This option is only available for the \fB\fCdevicemapper\fR, \fB\fCbtrfs\fR, \fB\fCoverlay2\fR  and \fB\fCzfs\fR graph drivers.
   For the \fB\fCdevicemapper\fR, \fB\fCbtrfs\fR and \fB\fCzfs\fR storage drivers, user cannot pass a size less than the Default BaseFS Size.
   For the \fB\fCoverlay2\fR storage driver, the size option is only available if the backing fs is \fB\fCxfs\fR and mounted with the \fB\fCpquota\fR mount option.
   Under these conditions, user can pass any size less than the backing fs size.

.PP
\fB\-\-stop\-signal\fP=\fISIGTERM\fP
  Signal to stop a container. Default is SIGTERM.

.PP
\fB\-\-stop\-timeout\fP=\fI10\fP
  Timeout (in seconds) to stop a container. Default is 10.

.PP
\fB\-\-shm\-size\fP=""
   Size of \fB\fC/dev/shm\fR\&. The format is \fB\fC<number><unit>\fR\&.
   \fB\fCnumber\fR must be greater than \fB\fC0\fR\&.  Unit is optional and can be \fB\fCb\fR (bytes), \fB\fCk\fR (kilobytes), \fB\fCm\fR(megabytes), or \fB\fCg\fR (gigabytes).
   If you omit the unit, the system uses bytes. If you omit the size entirely, the system uses \fB\fC64m\fR\&.

.PP
\fB\-\-sysctl\fP=SYSCTL
  Configure namespaced kernel parameters at runtime

.PP
IPC Namespace \- current sysctls allowed:

.PP
kernel.msgmax, kernel.msgmnb, kernel.msgmni, kernel.sem, kernel.shmall, kernel.shmmax, kernel.shmmni, kernel.shm\_rmid\_forced
  Sysctls beginning with fs.mqueue.*

.PP
If you use the \fB\fC\-\-ipc=host\fR option these sysctls will not be allowed.

.PP
Network Namespace \- current sysctls allowed:
      Sysctls beginning with net.*

.PP
If you use the \fB\fC\-\-network=host\fR option these sysctls will not be allowed.

.PP
\fB\-\-sig\-proxy\fP=\fItrue\fP|\fIfalse\fP
   Proxy received signals to the process (non\-TTY mode only). SIGCHLD, SIGSTOP, and SIGKILL are not proxied. The default is \fItrue\fP\&.

.PP
\fB\-\-memory\-swappiness\fP=""
   Tune a container's memory swappiness behavior. Accepts an integer between 0 and 100.

.PP
\fB\-t\fP, \fB\-\-tty\fP=\fItrue\fP|\fIfalse\fP
   Allocate a pseudo\-TTY. The default is \fIfalse\fP\&.

.PP
When set to true Docker can allocate a pseudo\-tty and attach to the standard
input of any container. This can be used, for example, to run a throwaway
interactive shell. The default is false.

.PP
The \fB\-t\fP option is incompatible with a redirection of the docker client
standard input.

.PP
\fB\-\-tmpfs\fP=[] Create a tmpfs mount

.PP
Mount a temporary filesystem (\fB\fCtmpfs\fR) mount into a container, for example:

.PP
$ docker run \-d \-\-tmpfs /tmp:rw,size=787448k,mode=1777 my\_image

.PP
This command mounts a \fB\fCtmpfs\fR at \fB\fC/tmp\fR within the container.  The supported mount
options are the same as the Linux default \fB\fCmount\fR flags. If you do not specify
any options, the systems uses the following options:
\fB\fCrw,noexec,nosuid,nodev,size=65536k\fR\&.

.PP
See also \fB\fC\-\-mount\fR, which is the successor of \fB\fC\-\-tmpfs\fR and \fB\fC\-\-volume\fR\&.
   Even though there is no plan to deprecate \fB\fC\-\-tmpfs\fR, usage of \fB\fC\-\-mount\fR is recommended.

.PP
\fB\-u\fP, \fB\-\-user\fP=""
   Sets the username or UID used and optionally the groupname or GID for the specified command.

.PP
The followings examples are all valid:
   \-\-user [user | user:group | uid | uid:gid | user:gid | uid:group ]

.PP
Without this argument the command will be run as root in the container.

.PP
\fB\-\-ulimit\fP=[]
    Ulimit options

.PP
\fB\-v\fP|\fB\-\-volume\fP[=\fI[[HOST\-DIR:]CONTAINER\-DIR[:OPTIONS]]\fP]
   Create a bind mount. If you specify, \fB\fC\-v /HOST\-DIR:/CONTAINER\-DIR\fR, Docker
   bind mounts \fB\fC/HOST\-DIR\fR in the host to \fB\fC/CONTAINER\-DIR\fR in the Docker
   container. If 'HOST\-DIR' is omitted,  Docker automatically creates the new
   volume on the host.  The \fB\fCOPTIONS\fR are a comma delimited list and can be:

.RS
.IP \(bu 2
[rw|ro]
.IP \(bu 2
[z|Z]
.IP \(bu 2
[\fB\fC[r]shared\fR|\fB\fC[r]slave\fR|\fB\fC[r]private\fR]
.IP \(bu 2
[\fB\fCdelegated\fR|\fB\fCcached\fR|\fB\fCconsistent\fR]
.IP \(bu 2
[nocopy]

.RE

.PP
The \fB\fCCONTAINER\-DIR\fR must be an absolute path such as \fB\fC/src/docs\fR\&. The \fB\fCHOST\-DIR\fR
can be an absolute path or a \fB\fCname\fR value. A \fB\fCname\fR value must start with an
alphanumeric character, followed by \fB\fCa\-z0\-9\fR, \fB\fC\_\fR (underscore), \fB\fC\&.\fR (period) or
\fB\fC\-\fR (hyphen). An absolute path starts with a \fB\fC/\fR (forward slash).

.PP
If you supply a \fB\fCHOST\-DIR\fR that is an absolute path,  Docker bind\-mounts to the
path you specify. If you supply a \fB\fCname\fR, Docker creates a named volume by that
\fB\fCname\fR\&. For example, you can specify either \fB\fC/foo\fR or \fB\fCfoo\fR for a \fB\fCHOST\-DIR\fR
value. If you supply the \fB\fC/foo\fR value, Docker creates a bind mount. If you
supply the \fB\fCfoo\fR specification, Docker creates a named volume.

.PP
You can specify multiple  \fB\-v\fP options to mount one or more mounts to a
container. To use these same mounts in other containers, specify the
\fB\-\-volumes\-from\fP option also.

.PP
You can supply additional options for each bind mount following an additional
colon.  A \fB\fC:ro\fR or \fB\fC:rw\fR suffix mounts a volume in read\-only or read\-write
mode, respectively. By default, volumes are mounted in read\-write mode.
You can also specify the consistency requirement for the mount, either
\fB\fC:consistent\fR (the default), \fB\fC:cached\fR, or \fB\fC:delegated\fR\&.  Multiple options are
separated by commas, e.g. \fB\fC:ro,cached\fR\&.

.PP
Labeling systems like SELinux require that proper labels are placed on volume
content mounted into a container. Without a label, the security system might
prevent the processes running inside the container from using the content. By
default, Docker does not change the labels set by the OS.

.PP
To change a label in the container context, you can add either of two suffixes
\fB\fC:z\fR or \fB\fC:Z\fR to the volume mount. These suffixes tell Docker to relabel file
objects on the shared volumes. The \fB\fCz\fR option tells Docker that two containers
share the volume content. As a result, Docker labels the content with a shared
content label. Shared volume labels allow all containers to read/write content.
The \fB\fCZ\fR option tells Docker to label the content with a private unshared label.
Only the current container can use a private volume.

.PP
By default bind mounted volumes are \fB\fCprivate\fR\&. That means any mounts done
inside container will not be visible on host and vice\-a\-versa. One can change
this behavior by specifying a volume mount propagation property. Making a
volume \fB\fCshared\fR mounts done under that volume inside container will be
visible on host and vice\-a\-versa. Making a volume \fB\fCslave\fR enables only one
way mount propagation and that is mounts done on host under that volume
will be visible inside container but not the other way around.

.PP
To control mount propagation property of volume one can use \fB\fC:[r]shared\fR,
\fB\fC:[r]slave\fR or \fB\fC:[r]private\fR propagation flag. Propagation property can
be specified only for bind mounted volumes and not for internal volumes or
named volumes. For mount propagation to work source mount point (mount point
where source dir is mounted on) has to have right propagation properties. For
shared volumes, source mount point has to be shared. And for slave volumes,
source mount has to be either shared or slave.

.PP
Use \fB\fCdf <source\-dir>\fR to figure out the source mount and then use
\fB\fCfindmnt \-o TARGET,PROPAGATION <source\-mount\-dir>\fR to figure out propagation
properties of source mount. If \fB\fCfindmnt\fR utility is not available, then one
can look at mount entry for source mount point in \fB\fC/proc/self/mountinfo\fR\&. Look
at \fB\fCoptional fields\fR and see if any propagation properties are specified.
\fB\fCshared:X\fR means mount is \fB\fCshared\fR, \fB\fCmaster:X\fR means mount is \fB\fCslave\fR and if
nothing is there that means mount is \fB\fCprivate\fR\&.

.PP
To change propagation properties of a mount point use \fB\fCmount\fR command. For
example, if one wants to bind mount source directory \fB\fC/foo\fR one can do
\fB\fCmount \-\-bind /foo /foo\fR and \fB\fCmount \-\-make\-private \-\-make\-shared /foo\fR\&. This
will convert /foo into a \fB\fCshared\fR mount point. Alternatively one can directly
change propagation properties of source mount. Say \fB\fC/\fR is source mount for
\fB\fC/foo\fR, then use \fB\fCmount \-\-make\-shared /\fR to convert \fB\fC/\fR into a \fB\fCshared\fR mount.

.PP
.RS

.PP
\fBNote\fP:
When using systemd to manage the Docker daemon's start and stop, in the systemd
unit file there is an option to control mount propagation for the Docker daemon
itself, called \fB\fCMountFlags\fR\&. The value of this setting may cause Docker to not
see mount propagation changes made on the mount point. For example, if this value
is \fB\fCslave\fR, you may not be able to use the \fB\fCshared\fR or \fB\fCrshared\fR propagation on
a volume.
.RE

.PP
To disable automatic copying of data from the container path to the volume, use
the \fB\fCnocopy\fR flag. The \fB\fCnocopy\fR flag can be set on bind mounts and named volumes.

.PP
See also \fB\fC\-\-mount\fR, which is the successor of \fB\fC\-\-tmpfs\fR and \fB\fC\-\-volume\fR\&.
Even though there is no plan to deprecate \fB\fC\-\-volume\fR, usage of \fB\fC\-\-mount\fR is recommended.

.PP
\fB\-\-volume\-driver\fP=""
   Container's volume driver. This driver creates volumes specified either from
   a Dockerfile's \fB\fCVOLUME\fR instruction or from the \fB\fCdocker run \-v\fR flag.
   See \fBdocker\-volume\-create(1)\fP for full details.

.PP
\fB\-\-volumes\-from\fP=[]
   Mount volumes from the specified container(s)

.PP
Mounts already mounted volumes from a source container onto another
   container. You must supply the source's container\-id. To share
   a volume, use the \fB\-\-volumes\-from\fP option when running
   the target container. You can share volumes even if the source container
   is not running.

.PP
By default, Docker mounts the volumes in the same mode (read\-write or
   read\-only) as it is mounted in the source container. Optionally, you
   can change this by suffixing the container\-id with either the \fB\fC:ro\fR or
   \fB\fC:rw\fR keyword.

.PP
If the location of the volume from the source container overlaps with
   data residing on a target container, then the volume hides
   that data on the target.

.PP
\fB\-w\fP, \fB\-\-workdir\fP=""
   Working directory inside the container

.PP
The default working directory for
running binaries within a container is the root directory (/). The developer can
set a different default with the Dockerfile WORKDIR instruction. The operator
can override the working directory by using the \fB\-w\fP option.


.SH Exit Status
.PP
The exit code from \fB\fCdocker run\fR gives information about why the container
failed to run or why it exited.  When \fB\fCdocker run\fR exits with a non\-zero code,
the exit codes follow the \fB\fCchroot\fR standard, see below:

.PP
\fB\fI125\fP\fP if the error is with Docker daemon \fB\fIitself\fP\fP

.PP
.RS

.nf
$ docker run \-\-foo busybox; echo $?
# flag provided but not defined: \-\-foo
  See 'docker run \-\-help'.
  125

.fi
.RE

.PP
\fB\fI126\fP\fP if the \fB\fIcontained command\fP\fP cannot be invoked

.PP
.RS

.nf
$ docker run busybox /etc; echo $?
# exec: "/etc": permission denied
  docker: Error response from daemon: Contained command could not be invoked
  126

.fi
.RE

.PP
\fB\fI127\fP\fP if the \fB\fIcontained command\fP\fP cannot be found

.PP
.RS

.nf
$ docker run busybox foo; echo $?
# exec: "foo": executable file not found in $PATH
  docker: Error response from daemon: Contained command not found or does not exist
  127

.fi
.RE

.PP
\fB\fIExit code\fP\fP of \fB\fIcontained command\fP\fP otherwise

.PP
.RS

.nf
$ docker run busybox /bin/sh \-c 'exit 3' 
# 3

.fi
.RE


.SH EXAMPLES
.SH Running container in read\-only mode
.PP
During container image development, containers often need to write to the image
content.  Installing packages into /usr, for example.  In production,
applications seldom need to write to the image.  Container applications write
to volumes if they need to write to file systems at all.  Applications can be
made more secure by running them in read\-only mode using the \-\-read\-only switch.
This protects the containers image from modification. Read only containers may
still need to write temporary data.  The best way to handle this is to mount
tmpfs directories on /run and /tmp.

.PP
.RS

.nf
# docker run \-\-read\-only \-\-tmpfs /run \-\-tmpfs /tmp \-i \-t fedora /bin/bash

.fi
.RE

.SH Exposing log messages from the container to the host's log
.PP
If you want messages that are logged in your container to show up in the host's
syslog/journal then you should bind mount the /dev/log directory as follows.

.PP
.RS

.nf
# docker run \-v /dev/log:/dev/log \-i \-t fedora /bin/bash

.fi
.RE

.PP
From inside the container you can test this by sending a message to the log.

.PP
.RS

.nf
(bash)# logger "Hello from my container"

.fi
.RE

.PP
Then exit and check the journal.

.PP
.RS

.nf
# exit

# journalctl \-b | grep Hello

.fi
.RE

.PP
This should list the message sent to logger.

.SH Attaching to one or more from STDIN, STDOUT, STDERR
.PP
If you do not specify \-a then Docker will attach everything (stdin,stdout,stderr)
. You can specify to which of the three standard streams (stdin, stdout, stderr)
you'd like to connect instead, as in:

.PP
.RS

.nf
# docker run \-a stdin \-a stdout \-i \-t fedora /bin/bash

.fi
.RE

.SH Sharing IPC between containers
.PP
Using shm\_server.c available here: 
\[la]https://www.cs.cf.ac.uk/Dave/C/node27.html\[ra]

.PP
Testing \fB\fC\-\-ipc=host\fR mode:

.PP
Host shows a shared memory segment with 7 pids attached, happens to be from httpd:

.PP
.RS

.nf
 $ sudo ipcs \-m

 \-\-\-\-\-\- Shared Memory Segments \-\-\-\-\-\-\-\-
 key        shmid      owner      perms      bytes      nattch     status      
 0x01128e25 0          root       600        1000       7                       

.fi
.RE

.PP
Now run a regular container, and it correctly does NOT see the shared memory segment from the host:

.PP
.RS

.nf
 $ docker run \-it shm ipcs \-m

 \-\-\-\-\-\- Shared Memory Segments \-\-\-\-\-\-\-\-
 key        shmid      owner      perms      bytes      nattch     status      

.fi
.RE

.PP
Run a container with the new \fB\fC\-\-ipc=host\fR option, and it now sees the shared memory segment from the host httpd:

.PP
.RS

.nf
 $ docker run \-it \-\-ipc=host shm ipcs \-m

 \-\-\-\-\-\- Shared Memory Segments \-\-\-\-\-\-\-\-
 key        shmid      owner      perms      bytes      nattch     status      
 0x01128e25 0          root       600        1000       7                   

.fi
.RE

.PP
Testing \fB\fC\-\-ipc=container:CONTAINERID\fR mode:

.PP
Start a container with a program to create a shared memory segment:

.PP
.RS

.nf
 $ docker run \-it shm bash
 $ sudo shm/shm\_server \&
 $ sudo ipcs \-m

 \-\-\-\-\-\- Shared Memory Segments \-\-\-\-\-\-\-\-
 key        shmid      owner      perms      bytes      nattch     status      
 0x0000162e 0          root       666        27         1                       

.fi
.RE

.PP
Create a 2nd container correctly shows no shared memory segment from 1st container:

.PP
.RS

.nf
 $ docker run shm ipcs \-m

 \-\-\-\-\-\- Shared Memory Segments \-\-\-\-\-\-\-\-
 key        shmid      owner      perms      bytes      nattch     status      

.fi
.RE

.PP
Create a 3rd container using the new \-\-ipc=container:CONTAINERID option, now it shows the shared memory segment from the first:

.PP
.RS

.nf
 $ docker run \-it \-\-ipc=container:ed735b2264ac shm ipcs \-m
 $ sudo ipcs \-m

 \-\-\-\-\-\- Shared Memory Segments \-\-\-\-\-\-\-\-
 key        shmid      owner      perms      bytes      nattch     status      
 0x0000162e 0          root       666        27         1

.fi
.RE

.SH Linking Containers
.PP
.RS

.PP
\fBNote\fP: This section describes linking between containers on the
default (bridge) network, also known as "legacy links". Using \fB\fC\-\-link\fR
on user\-defined networks uses the DNS\-based discovery, which does not add
entries to \fB\fC/etc/hosts\fR, and does not set environment variables for
discovery.
.RE

.PP
The link feature allows multiple containers to communicate with each other. For
example, a container whose Dockerfile has exposed port 80 can be run and named
as follows:

.PP
.RS

.nf
# docker run \-\-name=link\-test \-d \-i \-t fedora/httpd

.fi
.RE

.PP
A second container, in this case called linker, can communicate with the httpd
container, named link\-test, by running with the \fB\-\-link=<name>:<alias>\fP

.PP
.RS

.nf
# docker run \-t \-i \-\-link=link\-test:lt \-\-name=linker fedora /bin/bash

.fi
.RE

.PP
Now the container linker is linked to container link\-test with the alias lt.
Running the \fBenv\fP command in the linker container shows environment variables
 with the LT (alias) context (\fBLT\_\fP)

.PP
.RS

.nf
# env
HOSTNAME=668231cb0978
TERM=xterm
LT\_PORT\_80\_TCP=tcp://172.17.0.3:80
LT\_PORT\_80\_TCP\_PORT=80
LT\_PORT\_80\_TCP\_PROTO=tcp
LT\_PORT=tcp://172.17.0.3:80
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
PWD=/
LT\_NAME=/linker/lt
SHLVL=1
HOME=/
LT\_PORT\_80\_TCP\_ADDR=172.17.0.3
\_=/usr/bin/env

.fi
.RE

.PP
When linking two containers Docker will use the exposed ports of the container
to create a secure tunnel for the parent to access.

.PP
If a container is connected to the default bridge network and \fB\fClinked\fR
with other containers, then the container's \fB\fC/etc/hosts\fR file is updated
with the linked container's name.

.PP
.RS

.PP
\fBNote\fP Since Docker may live update the container's \fB\fC/etc/hosts\fR file, there
may be situations when processes inside the container can end up reading an
empty or incomplete \fB\fC/etc/hosts\fR file. In most cases, retrying the read again
should fix the problem.
.RE

.SH Mapping Ports for External Usage
.PP
The exposed port of an application can be mapped to a host port using the \fB\-p\fP
flag. For example, an httpd port 80 can be mapped to the host port 8080 using the
following:

.PP
.RS

.nf
# docker run \-p 8080:80 \-d \-i \-t fedora/httpd

.fi
.RE

.SH Creating and Mounting a Data Volume Container
.PP
Many applications require the sharing of persistent data across several
containers. Docker allows you to create a Data Volume Container that other
containers can mount from. For example, create a named container that contains
directories /var/volume1 and /tmp/volume2. The image will need to contain these
directories so a couple of RUN mkdir instructions might be required for you
fedora\-data image:

.PP
.RS

.nf
# docker run \-\-name=data \-v /var/volume1 \-v /tmp/volume2 \-i \-t fedora\-data true
# docker run \-\-volumes\-from=data \-\-name=fedora\-container1 \-i \-t fedora bash

.fi
.RE

.PP
Multiple \-\-volumes\-from parameters will bring together multiple data volumes from
multiple containers. And it's possible to mount the volumes that came from the
DATA container in yet another container via the fedora\-container1 intermediary
container, allowing to abstract the actual data source from users of that data:

.PP
.RS

.nf
# docker run \-\-volumes\-from=fedora\-container1 \-\-name=fedora\-container2 \-i \-t fedora bash

.fi
.RE

.SH Mounting External Volumes
.PP
To mount a host directory as a container volume, specify the absolute path to
the directory and the absolute path for the container directory separated by a
colon:

.PP
.RS

.nf
# docker run \-v /var/db:/data1 \-i \-t fedora bash

.fi
.RE

.PP
When using SELinux, be aware that the host has no knowledge of container SELinux
policy. Therefore, in the above example, if SELinux policy is enforced, the
\fB\fC/var/db\fR directory is not writable to the container. A "Permission Denied"
message will occur and an avc: message in the host's syslog.

.PP
To work around this, at time of writing this man page, the following command
needs to be run in order for the proper SELinux policy type label to be attached
to the host directory:

.PP
.RS

.nf
# chcon \-Rt svirt\_sandbox\_file\_t /var/db

.fi
.RE

.PP
Now, writing to the /data1 volume in the container will be allowed and the
changes will also be reflected on the host in /var/db.

.SH Using alternative security labeling
.PP
You can override the default labeling scheme for each container by specifying
the \fB\fC\-\-security\-opt\fR flag. For example, you can specify the MCS/MLS level, a
requirement for MLS systems. Specifying the level in the following command
allows you to share the same content between containers.

.PP
.RS

.nf
# docker run \-\-security\-opt label=level:s0:c100,c200 \-i \-t fedora bash

.fi
.RE

.PP
An MLS example might be:

.PP
.RS

.nf
# docker run \-\-security\-opt label=level:TopSecret \-i \-t rhel7 bash

.fi
.RE

.PP
To disable the security labeling for this container versus running with the
\fB\fC\-\-permissive\fR flag, use the following command:

.PP
.RS

.nf
# docker run \-\-security\-opt label=disable \-i \-t fedora bash

.fi
.RE

.PP
If you want a tighter security policy on the processes within a container,
you can specify an alternate type for the container. You could run a container
that is only allowed to listen on Apache ports by executing the following
command:

.PP
.RS

.nf
# docker run \-\-security\-opt label=type:svirt\_apache\_t \-i \-t centos bash

.fi
.RE

.PP
Note:

.PP
You would have to write policy defining a \fB\fCsvirt\_apache\_t\fR type.

.SH Setting device weight
.PP
If you want to set \fB\fC/dev/sda\fR device weight to \fB\fC200\fR, you can specify the device
weight by \fB\fC\-\-blkio\-weight\-device\fR flag. Use the following command:

.PP
.RS

.nf
# docker run \-it \-\-blkio\-weight\-device "/dev/sda:200" ubuntu

.fi
.RE

.SH Specify isolation technology for container (\-\-isolation)
.PP
This option is useful in situations where you are running Docker containers on
Microsoft Windows. The \fB\fC\-\-isolation <value>\fR option sets a container's isolation
technology. On Linux, the only supported is the \fB\fCdefault\fR option which uses
Linux namespaces. These two commands are equivalent on Linux:

.PP
.RS

.nf
$ docker run \-d busybox top
$ docker run \-d \-\-isolation default busybox top

.fi
.RE

.PP
On Microsoft Windows, can take any of these values:

.RS
.IP \(bu 2
\fB\fCdefault\fR: Use the value specified by the Docker daemon's \fB\fC\-\-exec\-opt\fR . If the \fB\fCdaemon\fR does not specify an isolation technology, Microsoft Windows uses \fB\fCprocess\fR as its default value.
.IP \(bu 2
\fB\fCprocess\fR: Namespace isolation only.
.IP \(bu 2
\fB\fChyperv\fR: Hyper\-V hypervisor partition\-based isolation.

.RE

.PP
In practice, when running on Microsoft Windows without a \fB\fCdaemon\fR option set,  these two commands are equivalent:

.PP
.RS

.nf
$ docker run \-d \-\-isolation default busybox top
$ docker run \-d \-\-isolation process busybox top

.fi
.RE

.PP
If you have set the \fB\fC\-\-exec\-opt isolation=hyperv\fR option on the Docker \fB\fCdaemon\fR, any of these commands also result in \fB\fChyperv\fR isolation:

.PP
.RS

.nf
$ docker run \-d \-\-isolation default busybox top
$ docker run \-d \-\-isolation hyperv busybox top

.fi
.RE

.SH Setting Namespaced Kernel Parameters (Sysctls)
.PP
The \fB\fC\-\-sysctl\fR sets namespaced kernel parameters (sysctls) in the
container. For example, to turn on IP forwarding in the containers
network namespace, run this command:

.PP
.RS

.nf
$ docker run \-\-sysctl net.ipv4.ip\_forward=1 someimage

.fi
.RE

.PP
Note:

.PP
Not all sysctls are namespaced. Docker does not support changing sysctls
inside of a container that also modify the host system. As the kernel
evolves we expect to see more sysctls become namespaced.

.PP
See the definition of the \fB\fC\-\-sysctl\fR option above for the current list of
supported sysctls.


.SH HISTORY
.PP
April 2014, Originally compiled by William Henry (whenry at redhat dot com)
based on docker.com source material and internal work.
June 2014, updated by Sven Dowideit 
\[la]SvenDowideit@home.org.au\[ra]
July 2014, updated by Sven Dowideit 
\[la]SvenDowideit@home.org.au\[ra]
November 2015, updated by Sally O'Malley 
\[la]somalley@redhat.com\[ra]
