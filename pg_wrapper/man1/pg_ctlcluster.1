.\" Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` 
.    ds C' 
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "PG_CTLCLUSTER 1"
.TH PG_CTLCLUSTER 1 "2018-09-26" "Debian" "Debian PostgreSQL infrastructure"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
pg_ctlcluster \- start/stop/restart/reload a PostgreSQL cluster
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBpg_ctlcluster\fR [\fIoptions\fR] \fIcluster-version\fR \fIcluster-name\fR \fIaction\fR [\fB\-\-\fR \fIpg_ctl options\fR]
.PP
where \fIaction\fR = \fBstart\fR|\fBstop\fR|\fBrestart\fR|\fBreload\fR|\fBstatus\fR|\fBpromote\fR
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
This program controls the \fBpostgres\fR server for a particular cluster. It
essentially wraps the \fBpg_ctl\fR\|(1) command. It determines the cluster version
and data path and calls the right version of \fBpg_ctl\fR with appropriate
configuration parameters and paths.
.PP
You have to start this program as the user who owns the database cluster or as
root.
.PP
To ease integration with \fBsystemd\fR operation, the alternative syntax
"\fBpg_ctlcluster\fR \fIversion\fR\fB\-\fR\fIcluster\fR \fIaction\fR" is also supported.
.SH "ACTIONS"
.IX Header "ACTIONS"
.IP "\fBstart\fR" 4
.IX Item "start"
A log file for this specific cluster is created if it does not exist yet (by
default,
\&\f(CW\*(C`/var/log/postgresql/postgresql\-\*(C'\fR\fIcluster-version\fR\f(CW\*(C`\-\*(C'\fR\fIcluster-name\fR\f(CW\*(C`.log\*(C'\fR),
and a PostgreSQL server process (\fBpostgres\fR\|(1)) is started on it. Exits with
0 on success, with 2 if the server is already running, and with 1 on other
failure conditions.
.IP "\fBstop\fR" 4
.IX Item "stop"
Stops the \fBpostgres\fR\|(1) server of the given cluster. By default, \*(L"smart\*(R"
shutdown mode is used, which waits until all clients disconnected.
.IP "\fBrestart\fR" 4
.IX Item "restart"
Stops the server if it is running and starts it (again).
.IP "\fBreload\fR" 4
.IX Item "reload"
Causes the configuration files to be re-read without a full shutdown of the
server.
.IP "\fBstatus\fR" 4
.IX Item "status"
Checks whether a server is running. If it is, the \s-1PID\s0 and the command line
options that were used to invoke it are displayed.
.IP "\fBpromote\fR" 4
.IX Item "promote"
Commands a running standby server to exit recovery and begin read-write
operations.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-f\fR|\fB\-\-force\fR" 4
.IX Item "-f|--force"
For \fBstop\fR and \fBrestart\fR, the \*(L"fast\*(R" mode is used which rolls back all active
transactions, disconnects clients immediately and thus shuts down cleanly. If
that does not work, shutdown is attempted again in \*(L"immediate\*(R" mode, which can
leave the cluster in an inconsistent state and thus will lead to a recovery run
at the next start. If this still does not help, the \fBpostgres\fR process is
killed.  Exits with 0 on success, with 2 if the server is not running, and with
1 on other failure conditions. This mode should only be used when the machine
is about to be shut down.
.IP "\fB\-m\fR|\fB\-\-mode\fR [\fBsmart\fR|\fBfast\fR|\fBimmediate\fR]" 4
.IX Item "-m|--mode [smart|fast|immediate]"
Shutdown mode to use for \fBstop\fR and \fBrestart\fR actions, default is \fBsmart\fR.
See \fBpg_ctl\fR\|(1) for documentation.
.IP "\fB\-\-foreground\fR" 4
.IX Item "--foreground"
Start \fBpostgres\fR in foreground, without daemonizing via \fBpg_ctl\fR.
.IP "\fB\-\-stdlog\fR" 4
.IX Item "--stdlog"
When \fB\-\-foreground\fR is in use, redirect stderr to the standard logfile in
\&\f(CW\*(C`/var/log/postgresql/\*(C'\fR.  (Default when not run in foreground.)
.IP "\fB\-\-bindir\fR \fIdirectory\fR" 4
.IX Item "--bindir directory"
Path to \fBpg_ctl\fR.  (Default is \f(CW\*(C`/usr/lib/postgresql/\*(C'\fR\fIversion\fR\f(CW\*(C`/bin\*(C'\fR.)
.IP "\fB\-o\fR|\fB\-\-options\fR \fIoption\fR" 4
.IX Item "-o|--options option"
Pass given \fIoption\fR as command line option to the \f(CW\*(C`postgres\*(C'\fR process. It is
possible to specify \fB\-o\fR multiple times. See \fBpostgres\fR\|(1) for a
description of valid options.
.IP "\fIpg_ctl options\fR" 4
.IX Item "pg_ctl options"
Pass given \fIpg_ctl options\fR as command line options to \fBpg_ctl\fR. See \fBpg_ctl\fR\|(1)
for a description of valid options.
.SH "FILES"
.IX Header "FILES"
.ie n .IP "\*(C`/etc/postgresql/\*(C'\fIcluster-version\fR\*(C`/\*(C'\fIcluster-name\fR\*(C`/pg_ctl.conf\*(C'" 4
.el .IP "\f(CW\*(C`/etc/postgresql/\*(C'\fR\fIcluster-version\fR\f(CW\*(C`/\*(C'\fR\fIcluster-name\fR\f(CW\*(C`/pg_ctl.conf\*(C'\fR" 4
.IX Item "/etc/postgresql/cluster-version/cluster-name/pg_ctl.conf"
This configuration file contains cluster specific options to be passed to
\&\fBpg_ctl\fR\|(1).
.ie n .IP "\*(C`/etc/postgresql/\*(C'\fIcluster-version\fR\*(C`/\*(C'\fIcluster-name\fR\*(C`/start.conf\*(C'" 4
.el .IP "\f(CW\*(C`/etc/postgresql/\*(C'\fR\fIcluster-version\fR\f(CW\*(C`/\*(C'\fR\fIcluster-name\fR\f(CW\*(C`/start.conf\*(C'\fR" 4
.IX Item "/etc/postgresql/cluster-version/cluster-name/start.conf"
This configuration file controls the start/stop behavior of the cluster. See
section \*(L"\s-1STARTUP CONTROL\*(R"\s0 in \fBpg_createcluster\fR\|(8) for details.
.SH "BUGS"
.IX Header "BUGS"
Changing the port number on startup using \fB\-o \-p\fR will not work as it breaks
the checks for running clusters.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fBpg_createcluster\fR\|(8), \fBpg_ctl\fR\|(1), \fBpg_wrapper\fR\|(1), \fBpg_lsclusters\fR\|(1),
\&\fBpostgres\fR\|(1)
.SH "AUTHOR"
.IX Header "AUTHOR"
Martin Pitt <mpitt@debian.org>
